"use strict";(self.webpackChunkinsurance=self.webpackChunkinsurance||[]).push([[29],{2029:(X,C,a)=>{a.r(C),a.d(C,{ClaimModule:()=>Q});var m=a(9808),c=a(9291),n=a(2382),e=a(5e3),d=a(5278),v=a(9201),q=a(2446),b=a(5397),T=a(1894),p=a(4546),h=a(1047),g=a(6042),z=a(2643),Z=a(2683),f=a(7957),l=a(4285);function _(r,o){if(1&r&&(e.ynx(0),e.TgZ(1,"form",2)(2,"nz-form-item")(3,"nz-form-label",3),e._uU(4," Name "),e.qZA(),e.TgZ(5,"nz-form-control",4),e._UZ(6,"input",5),e.qZA()(),e.TgZ(7,"nz-form-item")(8,"nz-form-label",3),e._uU(9,"Surname"),e.qZA(),e.TgZ(10,"nz-form-control",4),e._UZ(11,"input",17),e.qZA()(),e.TgZ(12,"nz-form-item")(13,"nz-form-label",3),e._uU(14,"Car Name "),e.qZA(),e.TgZ(15,"nz-form-control",4),e._UZ(16,"input",18),e.qZA()(),e.TgZ(17,"nz-form-item")(18,"nz-form-label",9),e._uU(19,"Insurance Cover"),e.qZA(),e.TgZ(20,"nz-form-control",4),e._UZ(21,"input",11),e.qZA()()(),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.paymentForm),e.xp6(2),e.Q6J("nzSm",6)("nzXs",24),e.xp6(2),e.Q6J("nzSm",14)("nzXs",24),e.xp6(3),e.Q6J("nzSm",6)("nzXs",24),e.xp6(2),e.Q6J("nzSm",14)("nzXs",24),e.xp6(3),e.Q6J("nzSm",6)("nzXs",24),e.xp6(2),e.Q6J("nzSm",14)("nzXs",24),e.xp6(3),e.Q6J("nzSm",6)("nzXs",24),e.xp6(2),e.Q6J("nzSm",14)("nzXs",24)}}function y(r,o){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&r){const t=o.$implicit,i=e.oxw();e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.date),e.xp6(2),e.Oqu(t.amount),e.xp6(2),e.Oqu(t.paymentMethod),e.xp6(2),e.Oqu(i.period)}}let A=(()=>{class r{constructor(t,i,s,u,w,M){this.notification=t,this.router=i,this.service=s,this.fb=u,this.customerService=w,this.ClaimService=M,this.isVisible=!1,this.cars=[],this.Form2=this.fb.group({name:[{value:"",disabled:!0},[n.kI.required]],regNumber:[{value:"",disabled:!0},[n.kI.required]],year:[{value:"",disabled:!0},[n.kI.required]],country:[{value:"",disabled:!0},[n.kI.required]],dateRegistered:[{value:"",disabled:!0},[n.kI.required]],type:[{value:"",disabled:!0},[n.kI.required]],insurance:[{value:"",disabled:!0},[n.kI.required]],amount:[{value:"",disabled:!0},[n.kI.required]]}),this.paymentForm=this.fb.group({name:[{value:"",disabled:!0},[n.kI.required]],surname:[{value:"",disabled:!0},[n.kI.required]],carName:[{value:"",disabled:!0},[n.kI.required]],insurance:[{value:"",disabled:!0},[n.kI.required]],ownerId:[{value:"",disabled:!0},[n.kI.required]],vechleId:[{value:"",disabled:!0},[n.kI.required]]}),this.paymentSubmitForm=this.fb.group({name:["",[n.kI.required]],surname:["",[n.kI.required]],ownerId:["",[n.kI.required]],vechleId:["",[n.kI.required]],carName:["",[n.kI.required]]}),this.id=this.router.snapshot.params.id}ngOnInit(){this.getCarById(),this.getPaymentsByCarID()}getCarById(){this.service.getCarById(this.id).subscribe(t=>{this.paymentForm.controls.ownerId.setValue(t.ownerId),this.paymentForm.controls.vechleId.setValue(t._id),this.showDetails(t),this.notification.success("Success","Succefully Retrived Customer.")})}getCustomer(t){this.customerService.getCustomerById(t).subscribe(i=>{this.currentCustomer=i,this.paymentForm.controls.surname.setValue(this.currentCustomer.surname),this.paymentForm.controls.name.setValue(i.name)},i=>{this.notification.error("Error",i)})}showDetails(t){console.log(t),this.getCustomer(t.ownerId),this.Form2.controls.name.setValue(t.name),this.Form2.controls.regNumber.setValue(t.regNumber),this.Form2.controls.year.setValue(t.year),this.Form2.controls.country.setValue(t.country),this.Form2.controls.dateRegistered.setValue(t.dateRegistered),this.Form2.controls.type.setValue(t.type),this.Form2.controls.insurance.setValue(t.insurance),this.service.getInsuranceByName(t.insurance).subscribe(i=>{this.period=i.period})}showModal(){this.isVisible=!0,this.paymentForm.controls.carName.setValue(this.Form2.value.name),this.paymentForm.controls.insurance.setValue(this.Form2.value.insurance)}handleOk(){this.paymentSubmitForm.controls.carName.setValue(this.paymentForm.value.carName),this.paymentSubmitForm.controls.name.setValue(this.paymentForm.value.name),this.paymentSubmitForm.controls.surname.setValue(this.paymentForm.value.surname),this.paymentSubmitForm.controls.ownerId.setValue(this.paymentForm.value.ownerId),this.paymentSubmitForm.controls.vechleId.setValue(this.paymentForm.value.vechleId),this.ClaimService.createClaim(this.paymentSubmitForm.getRawValue()).subscribe(t=>{console.log(t),this.notification.success("Success","Claim Created Succefully.")},t=>{this.notification.error("Error",t)}),this.isVisible=!1}handleCancel(){console.log("Button cancel clicked!"),this.isVisible=!1}getPaymentsByCarID(){this.service.getPaymentsByCarID(this.id).subscribe(t=>{this.cars=t,console.log(t),this.notification.success("Success","Succefully Retrived Payments.")},t=>{this.notification.error("Error",t)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(d.zb),e.Y36(c.gz),e.Y36(v.c),e.Y36(n.qu),e.Y36(q.v),e.Y36(b.U))},r.\u0275cmp=e.Xpm({type:r,selectors:[["insurance-claim-details"]],decls:55,vars:28,consts:[["nz-row",""],["nz-col","","nzSpan","12"],["nz-form","",3,"formGroup"],["nzRequired","","nzFor","email",3,"nzSm","nzXs"],["nzErrorTip","The input is not valid E-mail!",3,"nzSm","nzXs"],["nz-input","","formControlName","name"],["nz-input","","formControlName","type"],["nz-input","","formControlName","regNumber"],["nz-input","","formControlName","year"],["nzRequired","","nzFor","City",3,"nzSm","nzXs"],["nz-input","","formControlName","dateRegistered"],["nz-input","","formControlName","insurance"],["nz-button","",3,"nzType","click"],["nzTitle","Make Claim",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["basicTable",""],[4,"ngFor","ngForOf"],["nz-input","","formControlName","surname"],["nz-input","","formControlName","carName"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"nz-form-item")(4,"nz-form-label",3),e._uU(5,"Name"),e.qZA(),e.TgZ(6,"nz-form-control",4),e._UZ(7,"input",5),e.qZA()(),e.TgZ(8,"nz-form-item")(9,"nz-form-label",3),e._uU(10,"Type"),e.qZA(),e.TgZ(11,"nz-form-control",4),e._UZ(12,"input",6),e.qZA()(),e.TgZ(13,"nz-form-item")(14,"nz-form-label",3),e._uU(15,"RegNumber"),e.qZA(),e.TgZ(16,"nz-form-control",4),e._UZ(17,"input",7),e.qZA()(),e.TgZ(18,"nz-form-item")(19,"nz-form-label",3),e._uU(20,"Year"),e.qZA(),e.TgZ(21,"nz-form-control",4),e._UZ(22,"input",8),e.qZA()(),e.TgZ(23,"nz-form-item")(24,"nz-form-label",9),e._uU(25,"Date Registered"),e.qZA(),e.TgZ(26,"nz-form-control",4),e._UZ(27,"input",10),e.qZA()(),e.TgZ(28,"nz-form-item")(29,"nz-form-label",9),e._uU(30,"Insurance Cover"),e.qZA(),e.TgZ(31,"nz-form-control",4),e._UZ(32,"input",11),e.qZA()()(),e.TgZ(33,"button",12),e.NdJ("click",function(){return i.showModal()}),e.TgZ(34,"span"),e._uU(35,"Process Claim"),e.qZA()(),e.TgZ(36,"nz-modal",13),e.NdJ("nzVisibleChange",function(u){return i.isVisible=u})("nzOnCancel",function(){return i.handleCancel()})("nzOnOk",function(){return i.handleOk()}),e.YNc(37,_,22,17,"ng-container",14),e.qZA()(),e.TgZ(38,"div",1)(39,"nz-table",null,15)(41,"thead")(42,"tr")(43,"th"),e._uU(44,"Name"),e.qZA(),e.TgZ(45,"th"),e._uU(46,"Date"),e.qZA(),e.TgZ(47,"th"),e._uU(48,"Amount"),e.qZA(),e.TgZ(49,"th"),e._uU(50,"Payment Method"),e.qZA(),e.TgZ(51,"th"),e._uU(52,"Period"),e.qZA()()(),e.TgZ(53,"tbody"),e.YNc(54,y,11,5,"tr",16),e.qZA()()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",i.Form2),e.xp6(2),e.Q6J("nzSm",6)("nzXs",24),e.xp6(2),e.Q6J("nzSm",14)("nzXs",24),e.xp6(3),e.Q6J("nzSm",6)("nzXs",24),e.xp6(2),e.Q6J("nzSm",14)("nzXs",24),e.xp6(3),e.Q6J("nzSm",6)("nzXs",24),e.xp6(2),e.Q6J("nzSm",14)("nzXs",24),e.xp6(3),e.Q6J("nzSm",6)("nzXs",24),e.xp6(2),e.Q6J("nzSm",14)("nzXs",24),e.xp6(3),e.Q6J("nzSm",6)("nzXs",24),e.xp6(2),e.Q6J("nzSm",14)("nzXs",24),e.xp6(3),e.Q6J("nzSm",6)("nzXs",24),e.xp6(2),e.Q6J("nzSm",14)("nzXs",24),e.xp6(2),e.Q6J("nzType","primary"),e.xp6(3),e.Q6J("nzVisible",i.isVisible),e.xp6(18),e.Q6J("ngForOf",i.cars))},directives:[T.SK,T.t3,n._Y,n.JL,p.Lr,n.sg,p.Nx,p.iK,p.Fd,h.Zp,n.Fj,n.JJ,n.u,g.ix,z.dQ,Z.w,f.du,f.Hf,l.N8,l.Om,l.$Z,l.Uo,l._C,l.p0,m.sg],styles:[""]}),r})();function I(r,o){if(1&r&&(e.TgZ(0,"tr",4)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td")(12,"button",5),e._uU(13,"Claim"),e.qZA()()()),2&r){const t=o.$implicit;e.MGl("routerLink","/claim/make-claim/",t._id,""),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.regNumber),e.xp6(2),e.Oqu(t.type),e.xp6(2),e.Oqu(t.dateRegistered),e.xp6(2),e.Oqu(t.year)}}function F(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"td")(1,"button",1),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit;return e.oxw().info(s.name,s.surname,s.carName,s._id)}),e._uU(2,"Approve"),e.qZA()()}}function S(r,o){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.YNc(13,F,3,0,"td",4),e.qZA()),2&r){const t=o.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.surname),e.xp6(2),e.Oqu(t.carName),e.xp6(2),e.Oqu(t.date),e.xp6(2),e.Oqu(t._id),e.xp6(2),e.Oqu(t.status),e.xp6(1),e.Q6J("ngIf","Pending"===t.status)}}const x=[{path:"create-claim",component:(()=>{class r{constructor(t,i,s){this.notification=t,this.fb=i,this.service=s,this.searchText="",this.result=[],this.captchaTooltipIcon={type:"info-circle",theme:"twotone"}}submitForm(){this.validateForm.valid?console.log("submit",this.validateForm.value):Object.values(this.validateForm.controls).forEach(t=>{t.invalid&&(t.markAsDirty(),t.updateValueAndValidity({onlySelf:!0}))})}getCaptcha(t){t.preventDefault()}ngOnInit(){this.validateForm=this.fb.group({email:[null,[n.kI.email,n.kI.required]],password:[null,[n.kI.required]],checkPassword:[null,[n.kI.required]],nickname:[null,[n.kI.required]],phoneNumberPrefix:["+86"],phoneNumber:[null,[n.kI.required]],website:[null,[n.kI.required]],captcha:[null,[n.kI.required]],agree:[!1]})}search(){console.log(this.searchText),this.service.getCarByRegNumber(this.searchText).subscribe(t=>{this.result=[t],this.notification.success("Success","Succefully Retrived Car.")},t=>{this.notification.error("Error",t)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(d.zb),e.Y36(n.qu),e.Y36(v.c))},r.\u0275cmp=e.Xpm({type:r,selectors:[["insurance-create-claim"]],decls:23,vars:2,consts:[["nz-input","","size","40","id","email",3,"ngModel","ngModelChange"],["nz-button","",3,"click"],["basicTable",""],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],["nz-button",""]],template:function(t,i){1&t&&(e.TgZ(0,"div")(1,"input",0),e.NdJ("ngModelChange",function(u){return i.searchText=u}),e.qZA(),e.TgZ(2,"button",1),e.NdJ("click",function(){return i.search()}),e._uU(3," Search"),e.qZA()(),e.TgZ(4,"div")(5,"nz-table",null,2)(7,"thead")(8,"tr")(9,"th"),e._uU(10,"Name"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"RegNumber"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Type"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Date Registered"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Year"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Action"),e.qZA()()(),e.TgZ(21,"tbody"),e.YNc(22,I,14,6,"tr",3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("ngModel",i.searchText),e.xp6(21),e.Q6J("ngForOf",i.result))},directives:[h.Zp,n.Fj,n.JJ,n.On,g.ix,z.dQ,Z.w,l.N8,l.Om,l.$Z,l.Uo,l._C,l.p0,m.sg,c.rH],styles:[""]}),r})()},{path:"view-claims",component:(()=>{class r{constructor(t,i,s,u){this.modal=t,this.notification=i,this.fb=s,this.service=u,this.searchText="",this.result=[],this.isVisible=!1,this.update={status:"Approved"},this.captchaTooltipIcon={type:"info-circle",theme:"twotone"}}submitForm(){this.validateForm.valid?console.log("submit",this.validateForm.value):Object.values(this.validateForm.controls).forEach(t=>{t.invalid&&(t.markAsDirty(),t.updateValueAndValidity({onlySelf:!0}))})}getCaptcha(t){t.preventDefault()}ngOnInit(){this.validateForm=this.fb.group({email:[null,[n.kI.email,n.kI.required]],password:[null,[n.kI.required]],checkPassword:[null,[n.kI.required]],nickname:[null,[n.kI.required]],phoneNumberPrefix:["+86"],phoneNumber:[null,[n.kI.required]],website:[null,[n.kI.required]],captcha:[null,[n.kI.required]],agree:[!1]}),this.getClaims()}getClaims(){this.service.getAllClaims().subscribe(t=>{this.result=t,this.notification.success("Success","Succefully Retrived All Claims.")},t=>{this.notification.error("Error",t)})}search(){console.log(this.searchText),this.service.getClaimsById().subscribe(t=>{this.result=[t],this.notification.success("Success","Succefully Retrived Car.")},t=>{this.notification.error("Error",t)})}info(t,i,s,u){this.modal.info({nzTitle:"Confrimation of Authorization for "+t+" "+i,nzContent:"Are you sure you want to confrim the car "+s+" of "+t+" "+i+" with refrence number "+u,nzOnOk:()=>this.edit(u)})}edit(t){this.service.updateClaim(this.update,t).subscribe(i=>{this.notification.success("Success","Succefully Approved A Claim."),this.getClaims()},i=>{this.notification.error("Error",i)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(f.Sf),e.Y36(d.zb),e.Y36(n.qu),e.Y36(b.U))},r.\u0275cmp=e.Xpm({type:r,selectors:[["insurance-view-claims"]],decls:23,vars:2,consts:[["nz-input","","size","40","id","email",3,"ngModel","ngModelChange"],["nz-button","",3,"click"],["basicTable",""],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,i){1&t&&(e.TgZ(0,"div")(1,"input",0),e.NdJ("ngModelChange",function(u){return i.searchText=u}),e.qZA(),e.TgZ(2,"button",1),e.NdJ("click",function(){return i.search()}),e._uU(3," Search"),e.qZA()(),e.TgZ(4,"div")(5,"nz-table",null,2)(7,"thead")(8,"tr")(9,"th"),e._uU(10,"Owner Name"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Owner Surname"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Car Name"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Date Claimed"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Reference"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Status"),e.qZA()()(),e.TgZ(21,"tbody"),e.YNc(22,S,14,7,"tr",3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("ngModel",i.searchText),e.xp6(21),e.Q6J("ngForOf",i.result))},directives:[h.Zp,n.Fj,n.JJ,n.On,g.ix,z.dQ,Z.w,l.N8,l.Om,l.$Z,l.Uo,l._C,l.p0,m.sg,m.O5],styles:[""]}),r})()},{path:"make-claim/:id",component:A}];let N=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[c.Bz.forChild(x)],c.Bz]}),r})();var k=a(5197),O=a(5737);let J=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[d.zb],imports:[[m.ez,p.U5,h.o7,k.LV,n.UX,l.HQ,n.u5,O.S,g.sL,f.Qp,c.Bz]]}),r})();var V=a(9727);let Q=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[d.zb,V.dD],imports:[[m.ez,N,J]]}),r})()}}]);