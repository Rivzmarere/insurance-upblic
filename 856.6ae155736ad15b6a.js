"use strict";(self.webpackChunkinsurance=self.webpackChunkinsurance||[]).push([[856],{8856:(J,p,e)=>{e.r(p),e.d(p,{AuthModule:()=>b});var m=e(9808),a=e(9291),z=e(5861),u=e(520),i=e(2382),C=e(1072),y=e(7579),x=e(1135),o=e(5e3),A=e(4004);let d=(()=>{class n{constructor(t){this.http=t}login(t){return(new u.WM).append("Content-Type","application/json;"),this.http.post("https://hit200node.herokuapp.com/login",t).pipe((0,A.U)(l=>(console.log(l),l)))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(u.eN))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();var T=e(7968),c=e(4546),f=e(1894),g=e(1047),Z=e(2683),h=e(6042),M=e(2643);let O=(()=>{class n{constructor(t,r,l,U,w){this.authService=t,this.tokenService=r,this.logger=l,this.fb=U,this.router=w,this.isLoadingOne=!1,this._error=new y.x,this._processing=new x.X(!1),this.error$=this._error.asObservable(),this.processing$=this._processing.asObservable(),this.error=void 0}get phoneNumber(){return this.validateForm.controls.email}get password(){return this.validateForm.controls.password}submitForm(){this.router.navigateByUrl("dashboard")}ngOnInit(){this.validateForm=this.fb.group({email:[null,[i.kI.required]],password:[null,[i.kI.required]],remember:[!0]})}ngOnDestroy(){this._error.complete(),this._processing.complete()}submit(){var t=this;return(0,z.Z)(function*(){t.isLoadingOne=!0;try{t._processing.next(!0);const r=yield t.authService.login(t.validateForm.value).toPromise();console.log(r),t.processToken(r.token),t.isLoadingOne=!1}catch(r){t.isLoadingOne=!1,t.validateForm.patchValue({password:null}),r instanceof u.UA?404===r.status?t._error.next(r.error):400===r.status||401===r.status?(t.logger.info("Login failed. Http response: ",r),t._error.next("Invalid username or password")):t._error.next("Sign in failed. Please try again later"):(t.logger.warn("Login failed. Error: ",r),t._error.next("A problem is preventing your request to be successfully honoured"))}finally{t._processing.next(!1)}})()}processToken(t){console.log(t),this.tokenService.setToken(t),this.router.navigate(["/customer/view-customers"])}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(d),o.Y36(C.Br),o.Y36(T.Kf),o.Y36(i.qu),o.Y36(a.F0))},n.\u0275cmp=o.Xpm({type:n,selectors:[["insurance-login"]],decls:22,vars:5,consts:[["nz-form","",1,"login-form",3,"formGroup"],["nzErrorTip","Please input your username!"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","email","placeholder","email"],["nzErrorTip","Please input your Password!"],["nzPrefixIcon","lock"],["type","password","nz-input","","formControlName","password","placeholder","Password"],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox",""],[1,"login-form-forgot"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType","nzLoading","click"]],template:function(t,r){1&t&&(o.TgZ(0,"form",0)(1,"nz-form-item")(2,"nz-form-control",1)(3,"nz-input-group",2),o._UZ(4,"input",3),o.qZA()()(),o.TgZ(5,"nz-form-item")(6,"nz-form-control",4)(7,"nz-input-group",5),o._UZ(8,"input",6),o.qZA()()(),o.TgZ(9,"div",7)(10,"div",8)(11,"label",9)(12,"span"),o._uU(13,"Remember me"),o.qZA()()(),o.TgZ(14,"div",8)(15,"a",10),o._uU(16,"Forgot password"),o.qZA()()(),o.TgZ(17,"button",11),o.NdJ("click",function(){return r.submit()}),o._uU(18,"Log in"),o.qZA(),o._uU(19," Or "),o.TgZ(20,"a"),o._uU(21,"register now!"),o.qZA()()),2&t&&(o.Q6J("formGroup",r.validateForm),o.xp6(10),o.Q6J("nzSpan",12),o.xp6(4),o.Q6J("nzSpan",12),o.xp6(3),o.Q6J("nzType","primary")("nzLoading",r.isLoadingOne))},directives:[i._Y,i.JL,c.Lr,i.sg,f.SK,c.Nx,f.t3,c.Fd,g.gB,Z.w,g.Zp,i.Fj,i.JJ,i.u,h.ix,M.dQ],styles:[".login-form[_ngcontent-%COMP%]{max-width:300px}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}"]}),n})();var v=e(7484);const P=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["insurance-container"]],decls:7,vars:0,consts:[[1,"home-page"],[1,"inner-section","mx-5"],[1,"container","cover"],[1,"d-none","text-center","d-sm-block","d-sm-none","d-md-block"],["src","/assets/logo.png"],[1,"m-auto","login-card","col-lg-5"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),o._UZ(4,"img",4),o.qZA(),o.TgZ(5,"nz-card",5),o._UZ(6,"router-outlet"),o.qZA()()()())},directives:[v.bd,a.lC],styles:[".cover[_ngcontent-%COMP%]{position:relative;top:5%}.home-page[_ngcontent-%COMP%]{background-color:#113a5d;height:100vh}.inner-section[_ngcontent-%COMP%]{background-color:#fafafa;height:100vh}.login-card[_ngcontent-%COMP%]{border-radius:20px;box-shadow:0 1px 6px 1px #f3f3f3}"]}),n})(),children:[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",component:O},{path:"register",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["insurance-register"]],decls:2,vars:0,template:function(t,r){1&t&&(o.TgZ(0,"p"),o._uU(1,"register works!"),o.qZA())},styles:[""]}),n})()},{path:"**",redirectTo:"login"}]}];let F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[a.Bz.forChild(P)],a.Bz]}),n})();var L=e(647);let S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[m.ez,c.U5,g.o7,h.sL,i.u5,i.UX,a.Bz,v.vh,L.PV]]}),n})(),b=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[d],imports:[[m.ez,F,S]]}),n})()}}]);