"use strict";(self.webpackChunkinsurance=self.webpackChunkinsurance||[]).push([[645],{6645:(Y,h,r)=>{r.r(h),r.d(h,{AuthModule:()=>R});var v=r(9808),g=r(9291);function z(o,i,t,e,a,c,l){try{var p=o[c](l),u=p.value}catch(I){return void t(I)}p.done?i(u):Promise.resolve(u).then(e,a)}var d=r(520),s=r(2382),Z=r(1072),P=r(7579),M=r(1135),n=r(5e3),O=r(4004);let y=(()=>{class o{constructor(t){this.http=t}login(t){return(new d.WM).append("Content-Type","application/json;"),this.http.post("https://hit200node.herokuapp.com/login",t).pipe((0,O.U)(a=>(console.log(a),a)))}}return o.\u0275fac=function(t){return new(t||o)(n.LFG(d.eN))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac}),o})();var F=r(7968),m=r(4546),C=r(1894),f=r(1047),L=r(2683),x=r(6042),S=r(2643);let b=(()=>{class o{constructor(t,e,a,c,l){this.authService=t,this.tokenService=e,this.logger=a,this.fb=c,this.router=l,this.isLoadingOne=!1,this._error=new P.x,this._processing=new M.X(!1),this.error$=this._error.asObservable(),this.processing$=this._processing.asObservable(),this.error=void 0}get phoneNumber(){return this.validateForm.controls.email}get password(){return this.validateForm.controls.password}submitForm(){this.router.navigateByUrl("dashboard")}ngOnInit(){this.validateForm=this.fb.group({email:[null,[s.kI.required]],password:[null,[s.kI.required]],remember:[!0]})}ngOnDestroy(){this._error.complete(),this._processing.complete()}submit(){var t=this;return function T(o){return function(){var i=this,t=arguments;return new Promise(function(e,a){var c=o.apply(i,t);function l(u){z(c,e,a,l,p,"next",u)}function p(u){z(c,e,a,l,p,"throw",u)}l(void 0)})}}(function*(){t.isLoadingOne=!0;try{t._processing.next(!0);const e=yield t.authService.login(t.validateForm.value).toPromise();console.log(e),t.processToken(e.token),t.isLoadingOne=!1}catch(e){t.isLoadingOne=!1,t.validateForm.patchValue({password:null}),e instanceof d.UA?404===e.status?t._error.next(e.error):400===e.status||401===e.status?(t.logger.info("Login failed. Http response: ",e),t._error.next("Invalid username or password")):t._error.next("Sign in failed. Please try again later"):(t.logger.warn("Login failed. Error: ",e),t._error.next("A problem is preventing your request to be successfully honoured"))}finally{t._processing.next(!1)}})()}processToken(t){console.log(t),this.tokenService.setToken(t),this.router.navigate(["/customer/view-customers"])}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(y),n.Y36(Z.Br),n.Y36(F.Kf),n.Y36(s.qu),n.Y36(g.F0))},o.\u0275cmp=n.Xpm({type:o,selectors:[["insurance-login"]],decls:22,vars:5,consts:[["nz-form","",1,"login-form",3,"formGroup"],["nzErrorTip","Please input your username!"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","email","placeholder","email"],["nzErrorTip","Please input your Password!"],["nzPrefixIcon","lock"],["type","password","nz-input","","formControlName","password","placeholder","Password"],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox",""],[1,"login-form-forgot"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType","nzLoading","click"]],template:function(t,e){1&t&&(n.TgZ(0,"form",0)(1,"nz-form-item")(2,"nz-form-control",1)(3,"nz-input-group",2),n._UZ(4,"input",3),n.qZA()()(),n.TgZ(5,"nz-form-item")(6,"nz-form-control",4)(7,"nz-input-group",5),n._UZ(8,"input",6),n.qZA()()(),n.TgZ(9,"div",7)(10,"div",8)(11,"label",9)(12,"span"),n._uU(13,"Remember me"),n.qZA()()(),n.TgZ(14,"div",8)(15,"a",10),n._uU(16,"Forgot password"),n.qZA()()(),n.TgZ(17,"button",11),n.NdJ("click",function(){return e.submit()}),n._uU(18,"Log in"),n.qZA(),n._uU(19," Or "),n.TgZ(20,"a"),n._uU(21,"register now!"),n.qZA()()),2&t&&(n.Q6J("formGroup",e.validateForm),n.xp6(10),n.Q6J("nzSpan",12),n.xp6(4),n.Q6J("nzSpan",12),n.xp6(3),n.Q6J("nzType","primary")("nzLoading",e.isLoadingOne))},directives:[s._Y,s.JL,m.Lr,s.sg,C.SK,m.Nx,C.t3,m.Fd,f.gB,L.w,f.Zp,s.Fj,s.JJ,s.u,x.ix,S.dQ],styles:[".login-form[_ngcontent-%COMP%]{max-width:300px}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}"]}),o})();var A=r(7484);const w=[{path:"",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["insurance-container"]],decls:7,vars:0,consts:[[1,"home-page"],[1,"inner-section","mx-5"],[1,"container","cover"],[1,"d-none","text-center","d-sm-block","d-sm-none","d-md-block"],["src","/assets/logo.png"],[1,"m-auto","login-card","col-lg-5"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),n._UZ(4,"img",4),n.qZA(),n.TgZ(5,"nz-card",5),n._UZ(6,"router-outlet"),n.qZA()()()())},directives:[A.bd,g.lC],styles:[".cover[_ngcontent-%COMP%]{position:relative;top:5%}.home-page[_ngcontent-%COMP%]{background-color:#113a5d;height:100vh}.inner-section[_ngcontent-%COMP%]{background-color:#fafafa;height:100vh}.login-card[_ngcontent-%COMP%]{border-radius:20px;box-shadow:0 1px 6px 1px #f3f3f3}"]}),o})(),children:[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",component:b},{path:"register",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["insurance-register"]],decls:2,vars:0,template:function(t,e){1&t&&(n.TgZ(0,"p"),n._uU(1,"register works!"),n.qZA())},styles:[""]}),o})()},{path:"**",redirectTo:"login"}]}];let U=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[g.Bz.forChild(w)],g.Bz]}),o})();var J=r(647);let B=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[v.ez,m.U5,f.o7,x.sL,s.u5,s.UX,g.Bz,A.vh,J.PV]]}),o})(),R=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({providers:[y],imports:[[v.ez,U,B]]}),o})()}}]);