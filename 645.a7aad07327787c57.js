"use strict";(self.webpackChunkinsurance=self.webpackChunkinsurance||[]).push([[645],{6645:(Y,h,e)=>{e.r(h),e.d(h,{AuthModule:()=>R});var v=e(9808),g=e(9291);function z(o,s,t,r,a,c,l){try{var p=o[c](l),u=p.value}catch(I){return void t(I)}p.done?s(u):Promise.resolve(u).then(r,a)}var d=e(520),i=e(2382),Z=e(1072),P=e(7579),M=e(1135),n=e(5e3),b=e(4004);let y=(()=>{class o{constructor(t){this.http=t}login(t){return(new d.WM).append("Content-Type","application/json;"),this.http.post("http://hit200node-env.eba-arzr3fni.us-east-1.elasticbeanstalk.com/login",t).pipe((0,b.U)(a=>(console.log(a),a)))}}return o.\u0275fac=function(t){return new(t||o)(n.LFG(d.eN))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac}),o})();var F=e(7968),m=e(4546),C=e(1894),f=e(1047),S=e(2683),x=e(6042),w=e(2643);let O=(()=>{class o{constructor(t,r,a,c,l){this.authService=t,this.tokenService=r,this.logger=a,this.fb=c,this.router=l,this._error=new P.x,this._processing=new M.X(!1),this.error$=this._error.asObservable(),this.processing$=this._processing.asObservable(),this.error=void 0}get phoneNumber(){return this.validateForm.controls.email}get password(){return this.validateForm.controls.password}submitForm(){this.router.navigateByUrl("dashboard")}ngOnInit(){this.validateForm=this.fb.group({email:[null,[i.kI.required]],password:[null,[i.kI.required]],remember:[!0]})}ngOnDestroy(){this._error.complete(),this._processing.complete()}submit(){var t=this;return function T(o){return function(){var s=this,t=arguments;return new Promise(function(r,a){var c=o.apply(s,t);function l(u){z(c,r,a,l,p,"next",u)}function p(u){z(c,r,a,l,p,"throw",u)}l(void 0)})}}(function*(){try{t._processing.next(!0);const r=yield t.authService.login(t.validateForm.value).toPromise();console.log(r),t.processToken(r.token)}catch(r){t.validateForm.patchValue({password:null}),r instanceof d.UA?404===r.status?t._error.next(r.error):400===r.status||401===r.status?(t.logger.info("Login failed. Http response: ",r),t._error.next("Invalid username or password")):t._error.next("Sign in failed. Please try again later"):(t.logger.warn("Login failed. Error: ",r),t._error.next("A problem is preventing your request to be successfully honoured"))}finally{t._processing.next(!1)}})()}processToken(t){console.log(t),this.tokenService.setToken(t),this.router.navigate(["/dashboard"])}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(y),n.Y36(Z.Br),n.Y36(F.Kf),n.Y36(i.qu),n.Y36(g.F0))},o.\u0275cmp=n.Xpm({type:o,selectors:[["insurance-login"]],decls:22,vars:4,consts:[["nz-form","",1,"login-form",3,"formGroup"],["nzErrorTip","Please input your username!"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","email","placeholder","email"],["nzErrorTip","Please input your Password!"],["nzPrefixIcon","lock"],["type","password","nz-input","","formControlName","password","placeholder","Password"],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox",""],[1,"login-form-forgot"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType","click"]],template:function(t,r){1&t&&(n.TgZ(0,"form",0)(1,"nz-form-item")(2,"nz-form-control",1)(3,"nz-input-group",2),n._UZ(4,"input",3),n.qZA()()(),n.TgZ(5,"nz-form-item")(6,"nz-form-control",4)(7,"nz-input-group",5),n._UZ(8,"input",6),n.qZA()()(),n.TgZ(9,"div",7)(10,"div",8)(11,"label",9)(12,"span"),n._uU(13,"Remember me"),n.qZA()()(),n.TgZ(14,"div",8)(15,"a",10),n._uU(16,"Forgot password"),n.qZA()()(),n.TgZ(17,"button",11),n.NdJ("click",function(){return r.submit()}),n._uU(18,"Log in"),n.qZA(),n._uU(19," Or "),n.TgZ(20,"a"),n._uU(21,"register now!"),n.qZA()()),2&t&&(n.Q6J("formGroup",r.validateForm),n.xp6(10),n.Q6J("nzSpan",12),n.xp6(4),n.Q6J("nzSpan",12),n.xp6(3),n.Q6J("nzType","primary"))},directives:[i._Y,i.JL,m.Lr,i.sg,C.SK,m.Nx,C.t3,m.Fd,f.gB,S.w,f.Zp,i.Fj,i.JJ,i.u,x.ix,w.dQ],styles:[".login-form[_ngcontent-%COMP%]{max-width:300px}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}"]}),o})();var A=e(7484);const U=[{path:"",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["insurance-container"]],decls:7,vars:0,consts:[[1,"home-page"],[1,"inner-section","mx-5"],[1,"container","cover"],[1,"d-none","text-center","d-sm-block","d-sm-none","d-md-block"],["src","/assets/logo.png"],[1,"m-auto","login-card","col-lg-5"]],template:function(t,r){1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),n._UZ(4,"img",4),n.qZA(),n.TgZ(5,"nz-card",5),n._UZ(6,"router-outlet"),n.qZA()()()())},directives:[A.bd,g.lC],styles:[".cover[_ngcontent-%COMP%]{position:relative;top:5%}.home-page[_ngcontent-%COMP%]{background-color:#113a5d;height:100vh}.inner-section[_ngcontent-%COMP%]{background-color:#fafafa;height:100vh}.login-card[_ngcontent-%COMP%]{border-radius:20px;box-shadow:0 1px 6px 1px #f3f3f3}"]}),o})(),children:[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",component:O},{path:"register",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["insurance-register"]],decls:2,vars:0,template:function(t,r){1&t&&(n.TgZ(0,"p"),n._uU(1,"register works!"),n.qZA())},styles:[""]}),o})()},{path:"**",redirectTo:"login"}]}];let L=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[g.Bz.forChild(U)],g.Bz]}),o})();var J=e(647);let B=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[v.ez,m.U5,f.o7,x.sL,i.u5,i.UX,g.Bz,A.vh,J.PV]]}),o})(),R=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({providers:[y],imports:[[v.ez,L,B]]}),o})()}}]);